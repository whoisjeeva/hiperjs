{"version":3,"file":"../hiper.min.js","sources":["hiper.min.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction argparse(args) {\n  var keys = Object.keys(args);\n  var query = \"\";\n\n  for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {\n    var key = _keys[_i];\n    query += \"\".concat(key, \"=\").concat(args[key], \"&\");\n  }\n\n  return query.slice(0, -1);\n}\n\nvar Response = /*#__PURE__*/function () {\n  function Response(xhr) {\n    _classCallCheck(this, Response);\n\n    this.statusCode = xhr.status;\n    this.state = xhr.readyState;\n    this.text = xhr.responseText;\n    this.content = xhr.response;\n    this.headers = xhr.getAllResponseHeaders();\n    this.statusText = xhr.statusText;\n    this.url = xhr.responseURL;\n    this.type = xhr.responseType;\n  }\n\n  _createClass(Response, [{\n    key: \"json\",\n    value: function json() {\n      return JSON.parse(this.text);\n    }\n  }]);\n\n  return Response;\n}();\n\nfunction getRequest(url) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$recursive = _ref.recursive,\n      recursive = _ref$recursive === void 0 ? true : _ref$recursive,\n      _ref$headers = _ref.headers,\n      headers = _ref$headers === void 0 ? {} : _ref$headers,\n      _ref$params = _ref.params,\n      params = _ref$params === void 0 ? {} : _ref$params,\n      _ref$lifecycle = _ref.lifecycle,\n      lifecycle = _ref$lifecycle === void 0 ? null : _ref$lifecycle,\n      _ref$timeout = _ref.timeout,\n      timeout = _ref$timeout === void 0 ? 0 : _ref$timeout,\n      _ref$loadstart = _ref.loadstart,\n      loadstart = _ref$loadstart === void 0 ? null : _ref$loadstart,\n      _ref$load = _ref.load,\n      load = _ref$load === void 0 ? null : _ref$load,\n      _ref$loadend = _ref.loadend,\n      loadend = _ref$loadend === void 0 ? null : _ref$loadend,\n      _ref$progress = _ref.progress,\n      progress = _ref$progress === void 0 ? null : _ref$progress,\n      _ref$error = _ref.error,\n      error = _ref$error === void 0 ? null : _ref$error,\n      _ref$abort = _ref.abort,\n      abort = _ref$abort === void 0 ? null : _ref$abort;\n\n  var promise = new Promise(function (resolve, reject) {\n    var args = argparse(params);\n\n    if (args.length > 0) {\n      url += \"?\" + args;\n    }\n\n    var xhr = new XMLHttpRequest();\n    xhr.timeout = timeout; // 0 - unsent\n    // 1 - opened\n    // 2 - headers received\n    // 3 - loading\n    // 4 - done\n\n    xhr.onreadystatechange = function () {\n      var response = new Response(xhr);\n\n      if (this.readyState === 4 && this.status < 400) {\n        resolve(response);\n      }\n\n      if (lifecycle !== null) {\n        lifecycle(response);\n      }\n\n      if (!recursive && this.readyState === 4 && this.status >= 400) {\n        reject(response);\n      }\n\n      if (recursive && this.readyState === 4 && this.status >= 400) {\n        getRequest(url, {\n          recursive: recursive,\n          headers: headers,\n          params: params,\n          lifecycle: lifecycle\n        }).then(resolve, reject);\n      }\n    };\n\n    xhr.addEventListener(\"loadstart\", loadstart);\n    xhr.addEventListener(\"load\", load);\n    xhr.addEventListener(\"loadend\", loadend);\n    xhr.addEventListener(\"progress\", progress);\n    xhr.addEventListener(\"error\", error);\n    xhr.addEventListener(\"abort\", abort);\n    xhr.open('GET', \"\".concat(url).concat(args), true);\n    xhr.send(null);\n  });\n  return promise;\n}\n\nwindow.hiper = {\n  get: getRequest\n};\n\n},{}]},{},[1]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Response","xhr","instance","Constructor","TypeError","_classCallCheck","this","statusCode","status","state","readyState","text","responseText","content","response","headers","getAllResponseHeaders","statusText","url","responseURL","type","responseType","protoProps","staticProps","value","JSON","parse","prototype","window","hiper","get","getRequest","_ref","arguments","undefined","_ref$recursive","recursive","_ref$headers","_ref$params","params","_ref$lifecycle","lifecycle","_ref$timeout","timeout","_ref$loadstart","loadstart","_ref$load","load","_ref$loadend","loadend","_ref$progress","progress","_ref$error","error","_ref$abort","abort","Promise","resolve","reject","args","query","_i","_keys","keys","concat","slice","argparse","XMLHttpRequest","onreadystatechange","then","addEventListener","open","send"],"mappings":"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"}